=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2023.07.13 13:45:20 =~=~=~=~=~=~=~=~=~=~=~=
h:;echo: h:, 4
echo: h:, 0


Help menu.  End entry with ';'.  SRAM='*'.  May omit '='

b<?>   Manage fault buffer
  bd= dump fault buffer
  bh= reset history buffer
  br= reset fault buffer
  bR= reset all buffers

B<?> Battery e.g.:
 *Bm=  0.  Mon chem 0='BB', 1='CH' [0]
 *Bs=  0.  Sim chem 0='BB', 1='CH' [0]
 *BP=  1.00.  parallel in bank [1.00]'
 *BS=  1.00.  series in bank [1.00]'

c  clear talk, esp '-c;'

C<?> Chg SOC e.g.:
  Ca=  all - '(0-1.1)'
  Cm=  model (& ekf if mod)- '(0-1.1)'

D/S<?> Adj e.g.:
 *DA= -0.130: delta amp, A [-0.130]
 *DB=  0.440: delta noa, A [ 0.440]
 *Di=  0.000: delta all, A [ 0.000]
 *DI=  0.000: delta all no reset, A [ 0.000]
 *Dc=  0.000: delta, V [ 0.000]
  DE= 20: eframe mult Dr [20]
  DP=  4: print mult Dr [4]
  Dr=  100: minor frame, ms [100]
  Ds=  0.00: d_soc to Sim.voc-soc, fraction [0]
 *Dt=  0.000: delta hdwe, deg C [ 0.000]
  D^=  0.000: delta model, deg C [ 0.000]
  Dv=  0.00: volt fault inj, V [0]
  Dw=  0.00: Tab adj, V [.01]
  DT=  0.000: noise mod, deg C pk-pk [ 0.000]
  DV=  0.000: noise mod, V pk-pk [ 0.000]
  DM=  0.000: amp noise mod, A pk-pk [ 0.000]
  DN=  0.000: noa noise mod, A pk-pk [ 0.000]
 *SA=  0.893: scale amp [ 0.893]
 *SB=  0.893: scale noa [ 0.893]
 *SG=  1.000/ 1.000: sp. scale shunt gains [1]
 *Sh=  1.000: hys sclr [ 1.00]
  SH= -0.300: hys states [0]
 *Sq=  1.00: sp. Scalar cap sim
 *SQ=  1.00: sp. Scalar cap mon
  Sr=  1.00: Scalar res sim
 *Sk=  1.00: Sat mod ctbk sclr
 *SV=  1.013: scale vb sen [ 1.012]

F<?>   Faults
  Fc=  1.000: sclr cc_diff thr ^ [1]
  Fd=  1.000: sclr ib_diff thr ^ [1]
  Ff= 1: faults faked (ignored)[1]
  Fi=  1.000: sclr e_wrap_hi thr ^ [1]
  Fo=  1.000: sclr e_wrap_lo thr ^ [1]
  Fq=  1.000: sclr ib_quiet thr v [1]
  FI=  0: disab Ib rng
  FT=  0: disab Tb rng
  FV=  0: disab Vb rng

H<?>   Manage history
  Hd= dump summ log
  HR= reset summ log
  Hs= save and print log

P<?>   Print values
  Pa= all
  Pe= ekf
  Pf= faults
  Pm= Mon
  PM= amp shunt
  PN= noa shunt
  Pr= retained and command
  Ps= Sim
  Px= ib select
  Pv= vb details

Q      vital stats

R<?>   Reset
  Rb= batteries to present inputs
  Rf= fault logic latches
  Ri= infinite counter
  Rr= saturate Mon and equalize Sim & Mon
  RR= DEPLOY
  Rs= small.  Reinitialize filters
  RS= SavedPars: Reinitialize saved

s  curr select mode (-1=noa, 0=auto, 1=amp) = 1
 
*U= 1689259859: Unix time [auto when wifi]

v= 0: verbosity, -128 - +128. [4]
  -<>: Negative - Arduino plot compatible
  v-2: ADS counts for throughput meas
   v1: GP
   v2: GP, Sim & Sel
   v3: EKF
   v4: GP, Sim, Sel, & EKF
   v5: OLED display
  v12: EKF
 v-13: ib_dscn
  v14: vshunt and Ib raw
  v15: vb raw
  v16: Tb
 v-23: Vb_hdwe_ac
 v-24: Vb_hdwe_ac, Ib_hdwe
  v75: voc_low check mod
  v76: vb model
  v78: Batt model sat
  v79: sat_ib model
  v99: calibration

V<?> - VOC(SOC) curve deltas
 VM=  0.110: Mon vsoc out, V [0]
 VS=  0.110: Sim vsoc out, V [0]
 Vm=  0.000: Mon soc in [0]
 Vs=  0.000: Sim soc in[0]

W<?> - iters to wait

X<?> - Test Mode.   For example:
 Xd=  0,   dc-dc charger on [0]
 Xm=  0,   modeling bitmap [0b00000000]
      0x128=1<<7 ib_noa_dscn = 0
      0x64 =1<<6 ib_amp_dscn = 0
      0x32 =1<<5 vb_dscn = 0
      0x16 =1<<4 temp_dscn = 0
      0x8  =1<<3 tweak_test = 0
      0x4  =1<<2 current = 0
      0x2  =1<<1 voltage = 0
      0x1  =1<<0 temp = 0
 Xa=  0.000: Inj amp A pk (0-18.3) [0]
 Xb=  0.000: Inj bias A [0]
 Xf=  0.000: Inj freq Hz (0-2) [0]
 Xt=  0: Inj 'n'=none(0) 's'=sin(1) 'q'=square(2) 't'=tri(3) biases(4,5,6) 'o'=cos(8))
 Xp= <?>, scripted tests...
  Xp-1: Off, modeling false
  Xp0: reset tests
  Xp2: -0.4C soft disch, reset xp0 or Di0
  Xp3: +0.4C soft chg
  Xp4: -1C soft disch, reset xp0 or Di0
  Xp5: +1C soft chg
  Xp6: +/-500 A pulse EKF
  Xp7: +/-500 A pulse SS
  Xp10:tweak cycle test
  Xp11:slow cycle test
  Xp12:slow half cycle reg test
  Xp20:collect fast data
  Xp21:collect slow data
 XC=  0.000 cycles inj
 XR  RUN inj
 XS  STOP inj
 Xs= 1.00 scalar on T_SAT
 XW= 2779096.58 s wait start inj
 XT= 2779096.58 s tail end inj
 Xu= 0 T=ignore Tb read
 Xv= 1.00 scale Tb 1-wire stale persist

*Xx<> = SRAM saved

urgency of cmds: -=ASAP,*=SOON, '' or +=QUEUE

v1;echo: v1, 4
echo: v1, 0
sp.debug 0 to 1
unit,               hm,                  cTime,       dt,       chm,qcrs,sat,sel,mod,bmso, Tb,  vb,  ib,   ib_charge, ioc, voc_soc,    vsat,dv_dyn,voc_stat,voc_ekf,     y_ekf,    soc_s,soc_ekf,soc,soc_min, Tbl,
g20230530_soc1a_bb, 2023-07-13T14:51:02,  85482814.947, 0.100,   0,  390240, 1,  1,  0,  0, 26.999,14.486,     0.604,     0.604,   -23.077,14.61000,    13.80799,0.00708,14.77852,14.60996,   0.197175, 1.00000,1.00000,1.00000,0.01501,26.999,
g20230530_soc1a_bb, 2023-07-13T14:51:03,  85482815.347, 0.100,   0,  390240, 1,  1,  0,  0, 26.999,14.473,     0.212,     0.212,   -23.077,14.61000,    13.80799,0.00266,14.77008,14.60996,   0.197175, 1.00000,1.00000,1.00000,0.01501,26.999,
vg20230530_soc1a_bb, 2023-07-13T14:51:03,  85482815.747, 0.100,   0,  390240, 1,  1,  0,  0, 26.999,14.468,     0.359,     0.359,   -23.077,14.60999,    13.80799,0.00431,14.76413,14.60983,   0.147519, 1.00000,1.00000,1.00000,0.01501,26.999,
0g20230530_soc1a_bb, 2023-07-13T14:51:04,  85482816.147, 0.100,   0,  390240, 1,  1,  0,  0, 26.999,14.460,     0.359,     0.359,   -23.077,14.61000,    13.80799,0.00431,14.75556,14.60983,   0.147519, 1.00000,1.00000,1.00000,0.01501,26.999,
;echo: v0, 4
echo: v0, 0
sp.debug 1 to 0
Pf;echo: Pf, 4
echo: Pf, 0
unit_h, 2023-07-12T19:11:28, 1689189088,  28.493,  14.455,   0.310,  -0.048,  28.493,  14.455,   0.310,  1.0000,  0.0075,  1.0000,  14.452,  14.752,  -0.133, 0, 0,
unit_h, 2023-07-12T19:39:36, 1689190776,  28.625,  14.433,   0.163,   0.342,  28.625,  14.433,   0.163,  1.0000,  0.0068,  1.0000,  14.432,  14.732,  -0.129, 0, 0,
unit_h, 2023-07-12T20:07:43, 1689192463,  29.312,  14.463,   0.065,   0.243,  29.312,  14.463,   0.065,  1.0000,  0.0035,  1.0000,  14.463,  14.762,  -0.124, 0, 0,
unit_h, 2023-07-12T20:35:51, 1689194151,  29.875,  14.438,  -0.080,   0.438,  29.875,  14.438,  -0.080,  1.0000,  0.0006,  1.0000,  14.438,  14.738,  -0.124, 0, 0,
unit_h, 2023-07-12T21:03:58, 1689195838,  30.312,  14.455,   0.212,   0.390,  30.312,  14.455,   0.212,  1.0000,  0.0062,  1.0000,  14.453,  14.752,  -0.113, 0, 0,
unit_h, 2023-07-12T21:32:06, 1689197526,  30.625,  14.443,   0.065,   0.145,  30.625,  14.443,   0.065,  1.0000,  0.0125,  1.0000,  14.442,  14.742,  -0.130, 0, 0,
unit_h, 2023-07-12T22:00:13, 1689199213,  30.682,  14.047,  -0.032,  -0.195,  30.682,  14.047,  -0.032,  0.9999,  0.0136,  0.9980,  14.048,  14.348,   0.282, 0, 0,
unit_h, 2023-07-12T22:28:21, 1689200901,  30.057,  13.799,  -0.080,   0.000,  30.057,  13.799,  -0.080,  0.9999,  0.0011,  0.9967,  13.800,  14.100,   0.510, 0, 0,
unit_h, 2023-07-12T22:56:28, 1689202588,  29.493,  13.619,  -0.423,  -0.537,  29.493,  13.619,  -0.423,  0.9999,  0.0025,  0.9956,  13.624,  13.924,   0.680, 0, 0,
unit_h, 2023-07-12T23:24:36, 1689204276,  28.993,  13.216,  -1.792,  -1.712,  28.993,  13.216,  -1.792,  0.9960,  0.0050,  0.9745,  13.238,  13.248,   0.711, 0, 0,
unit_h, 2023-07-12T23:52:43, 1689205963,  28.743,  13.272,  -1.988,  -2.005,  28.743,  13.272,  -1.988,  0.9898,  0.0063,  0.8450,  13.297,  13.307,   0.111, 0, 0,
unit_h, 2023-07-13T00:20:51, 1689207651,  28.493,  13.233,  -1.402,  -0.243,  28.493,  13.233,  -1.402,  0.9838,  0.0075,  0.6779,  13.250,  13.254,   0.118, 0, 0,
unit_h, 2023-07-13T00:48:58, 1689209338,  28.118,  13.233,  -1.792,  -1.027,  28.118,  13.233,  -1.792,  0.9804,  0.0091,  0.6352,  13.255,  13.263,   0.110, 0, 0,
unit_h, 2023-07-13T01:17:06, 1689211026,  27.557,  13.242,  -1.792,  -1.418,  27.557,  13.242,  -1.792,  0.9780,  0.0121,  0.6209,  13.264,  13.275,   0.116, 0, 0,
unit_h, 2023-07-13T01:45:13, 1689212713,  26.932,  13.216,  -1.938,  -1.565,  26.932,  13.216,  -1.938,  0.9756,  0.0153,  0.6169,  13.240,  13.249,   0.117, 0, 0,
unit_h, 2023-07-13T02:13:21, 1689214401,  26.307,  13.212,  -1.842,  -1.662,  26.307,  13.212,  -1.842,  0.9718,  0.0184,  0.6146,  13.235,  13.246,   0.122, 0, 0,
unit_h, 2023-07-13T02:41:28, 1689216088,  25.743,  13.238,  -1.498,  -1.368,  25.743,  13.238,  -1.498,  0.9699,  0.0213,  0.6192,  13.256,  13.262,   0.120, 0, 16,
unit_h, 2023-07-13T03:09:36, 1689217776,  25.118,  13.247,  -1.205,  -1.808,  25.118,  13.247,  -1.205,  0.9700,  0.0243,  0.6308,  13.261,  13.268,   0.124, 0, 0,
unit_h, 2023-07-13T03:37:43, 1689219463,  24.557,  13.225,  -1.253,  -0.978,  24.557,  13.225,  -1.253,  0.9704,  0.0272,  0.6394,  13.240,  13.248,   0.124, 0, 0,
unit_h, 2023-07-13T04:05:51, 1689221151,  23.993,  13.225,  -1.352,  -1.515,  23.993,  13.225,  -1.352,  0.9696,  0.0300,  0.6421,  13.242,  13.248,   0.126, 0, 16,
unit_h, 2023-07-13T04:33:58, 1689222838,  23.368,  13.229,  -1.645,  -1.515,  23.368,  13.229,  -1.645,  0.9679,  0.0331,  0.6361,  13.249,  13.258,   0.133, 0, 16,
unit_h, 2023-07-13T05:02:06, 1689224526,  22.807,  13.233,  -1.695,  -1.320,  22.807,  13.233,  -1.695,  0.9663,  0.0359,  0.6405,  13.254,  13.261,   0.132, 0, 16,
unit_h, 2023-07-13T05:30:13, 1689226213,  22.243,  13.182,  -1.450,  -1.272,  22.243,  13.182,  -1.450,  0.9645,  0.0387,  0.6449,  13.200,  13.207,   0.133, 0, 16,
unit_h, 2023-07-13T05:58:21, 1689227901,  21.743,  13.229,  -2.183,  -1.565,  21.743,  13.229,  -2.183,  0.9621,  0.0412,  0.6474,  13.255,  13.263,   0.135, 0, 16,
unit_h, 2023-07-13T06:26:28, 1689229588,  21.307,  13.178,  -1.938,  -2.298,  21.307,  13.178,  -1.938,  0.9583,  0.0434,  0.6464,  13.202,  13.210,   0.143, 0, 16,
unit_h, 2023-07-13T06:54:36, 1689231276,  20.932,  13.229,  -1.205,  -1.125,  20.932,  13.229,  -1.205,  0.9547,  0.0453,  0.6442,  13.244,  13.251,   0.140, 0, 16,
unit_h, 2023-07-13T07:22:43, 1689232963,  20.493,  13.216,  -1.303,  -1.222,  20.493,  13.216,  -1.303,  0.9524,  0.0475,  0.6590,  13.232,  13.239,   0.133, 0, 16,
unit_h, 2023-07-13T07:50:51, 1689234651,  20.118,  13.191,  -1.450,  -0.782,  20.118,  13.191,  -1.450,  0.9493,  0.0494,  0.6647,  13.208,  13.215,   0.134, 0, 16,
unit_h, 2023-07-13T08:18:58, 1689236338,  19.743,  13.199,  -2.037,  -1.515,  19.743,  13.199,  -2.037,  0.9460,  0.0506,  0.6676,  13.223,  13.232,   0.134, 0, 16,
unit_h, 2023-07-13T08:47:06, 1689238026,  19.368,  13.216,  -1.058,  -0.488,  19.368,  13.216,  -1.058,  0.9454,  0.0514,  0.6801,  13.229,  13.232,   0.119, 0, 16,
unit_h, 2023-07-13T09:15:13, 1689239713,  19.057,  13.272,  -0.032,   0.000,  19.057,  13.272,  -0.032,  0.9467,  0.0521,  0.7044,  13.273,  13.273,   0.104, 0, 16,
unit_h, 2023-07-13T09:43:21, 1689241401,  19.187,  13.795,  25.988,  26.362,  19.187,  13.795,  25.988,  1.0000,  0.0519,  0.9948,  13.475,  13.775,   0.825, 0, 0,
unit_h, 2023-07-13T10:11:28, 1689243088,  19.687,  13.752,   1.385,   1.467,  19.687,  13.752,   1.385,  1.0000,  0.0507,  0.9960,  13.735,  14.035,   0.613, 0, 0,
unit_h, 2023-07-13T10:39:36, 1689244776,  19.937,  14.463,   0.310,   0.342,  19.937,  14.463,   0.310,  1.0000,  0.0501,  1.0000,  14.459,  14.759,  -0.152, 0, 0,
unit_h, 2023-07-13T11:07:43, 1689246463,  20.625,  14.438,   0.407,   0.488,  20.625,  14.438,   0.407,  1.0000,  0.0468,  1.0000,  14.433,  14.733,  -0.148, 0, 0,
unit_h, 2023-07-13T11:35:51, 1689248151,  21.875,  14.447,   0.113,   0.292,  21.875,  14.447,   0.113,  1.0000,  0.0408,  1.0000,  14.445,  14.745,  -0.153, 0, 0,
unit_h, 2023-07-13T12:03:58, 1689249838,  22.875,  14.451,   0.407,   0.195,  22.875,  14.451,   0.407,  1.0000,  0.0358,  1.0000,  14.446,  14.746,  -0.147, 0, 0,
unit_h, 2023-07-13T12:32:06, 1689251526,  23.687,  14.425,   0.700,   0.097,  23.687,  14.425,   0.700,  1.0000,  0.0315,  1.0000,  14.417,  14.717,  -0.146, 0, 0,
unit_h, 2023-07-13T13:00:13, 1689253213,  24.750,  14.477,   0.603,   0.390,  24.750,  14.477,   0.603,  1.0000,  0.0264,  1.0000,  14.469,  14.769,  -0.142, 0, 0,
unit_h, 2023-07-13T13:28:21, 1689254901,  25.312,  14.438,   0.065,   0.243,  25.312,  14.438,   0.065,  1.0000,  0.0234,  1.0000,  14.437,  14.737,  -0.140, 0, 0,
unit_h, 2023-07-13T13:56:28, 1689256588,  26.000,  14.433,  -0.080,   0.195,  26.000,  14.433,  -0.080,  1.0000,  0.0200,  1.0000,  14.434,  14.734,  -0.141, 0, 0,
unit_h, 2023-07-13T14:24:36, 1689258276,  26.500,  14.451,   0.457,   0.145,  26.500,  14.451,   0.457,  1.0000,  0.0174,  1.0000,  14.446,  14.746,  -0.137, 0, 0,
fltb,  date,                time,    Tb_h, vb_h, ibah, ibnh, Tb, vb, ib, soc, soc_min, soc_ekf, voc, voc_stat, e_w_f, fltw, falw,
unit_f, 2023-07-13T14:50:11, 1689259811,  27.000,  14.473,   0.358,   0.195,  27.000,  14.473,   0.358,  1.0000,  0.0152,  1.0000,  14.483,  14.783,  -0.163, 0, 0,
unit_f, 2023-07-13T14:50:20, 1689259820,  27.000,  14.502,   0.553,   0.000,  27.000,  14.502,   0.553,  1.0000,  0.0151,  1.0000,  14.496,  14.796,  -0.164, 0, 0,
unit_f, 2023-07-13T14:50:30, 1689259830,  27.000,  14.459,   0.113,   0.243,  27.000,  14.459,   0.113,  1.0000,  0.0151,  1.0000,  14.506,  14.806,  -0.164, 0, 0,
unit_f, 2023-07-13T14:50:39, 1689259839,  27.000,  14.473,   0.358,   0.537,  27.000,  14.473,   0.358,  1.0000,  0.0151,  1.0000,  14.444,  14.744,  -0.163, 0, 0,
unit_f, 2023-07-13T14:50:49, 1689259849,  27.000,  14.502,   0.457,   0.438,  27.000,  14.502,   0.457,  1.0000,  0.0150,  1.0000,  14.453,  14.753,  -0.163, 0, 0,
unit_f, 2023-07-13T14:50:58, 1689259858,  27.000,  14.494,   0.407,   0.537,  27.000,  14.494,   0.407,  1.0000,  0.0150,  1.0000,  14.454,  14.754,  -0.165, 0, 0,
unit_f, 2023-07-13T14:51:08, 1689259868,  27.000,  14.447,   0.457,   0.390,  27.000,  14.447,   0.457,  1.0000,  0.0150,  1.0000,  14.483,  14.783,  -0.163, 0, 0,
fltb,  date,                time,    Tb_h, vb_h, ibah, ibnh, Tb, vb, ib, soc, soc_min, soc_ekf, voc, voc_stat, e_w_f, fltw, falw,

Sen::
Fault:
 cc_diff    0.000  thr=200.000 Fc^
 ib_diff   -0.088  thr= 10.000 Fd^
 e_wrap    -0.165  thr=-492.000 Fo^393.600 Fi^
 ib_quiet  -0.089  thr=  0.005 Fq v

 soc    1.000  soc_inf   1.096 voc  14.465  voc_soc  14.610
 dis_tb_fa 0  dis_vb_fa 0  dis_ib_fa 0
 bms_off   0

 Tbh= 27.000  Tbm= 27.000
 Vbh  14.473  Vbm  14.307
 imh   0.701  imm   0.701
 inh   0.147  inm   0.701

 mod_tb 0 mod_vb 0 mod_ib  0
 mod_tb_dscn 0 mod_vb_dscn 0 mod_ib_amp_dscn 0 mod_ib_noa_dscn 0
 tb_s_st 1  vb_s_st 1  ib_s_st 1
 fake_faults 1 latched_fail 1 latched_fail_fake 0 preserving 0

 bare det n  0  x 
 bare det m  0  x 
 ib_dsc  0  0 'Fq v'
 ibd_lo  0  0 'Fd ^  *SA/*SB'
 ibd_hi  0  0 'Fd ^  *SA/*SB'
 red wv  0  0   'Fd, Fi/Fo ^'
 wl      0  0 'Fo ^'
 wh      0  0 'Fi ^'
 cc_dif  x  0 'Fc ^'
 ib n    0  0 'Fi 1'
 ib m    0  0 'Fi 1'
 vb      0  0 'Fv 1  *SV, *Dc/*Dv'
 tb      0  0 'Ft 1'
  0000000000000   00000000000
  CBA98765x3210 xxA9876543210
  fltw=0     falw=0
fake_faults=>redl
Summ...
